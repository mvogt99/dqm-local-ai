# DQM-Local-AI Backend API Documentation

Generated by: RTX 5090 (Qwen2.5-Coder-32B)

This document provides detailed information about the endpoints available in the DQM-Local-AI backend API.

## Base URL
Local development: `http://localhost:8001`

---

## Data Profiling

### 1. List All Tables
**Endpoint:** `GET /data-profiling/tables`
**Description:** Retrieve a list of all tables available for profiling.

**Example Request:**
```bash
curl -X GET "http://localhost:8001/data-profiling/tables"
```

**Example Response:**
```json
{
    "tables": ["sales", "customers", "products"]
}
```

### 2. Profile a Table
**Endpoint:** `GET /data-profiling/profile/{table}`
**Description:** Retrieve a profile of a specific table.

**Example Request:**
```bash
curl -X GET "http://localhost:8001/data-profiling/profile/sales"
```

**Example Response:**
```json
{
    "table_name": "sales",
    "row_count": 1000,
    "columns": [
        {
            "column_name": "sale_id",
            "data_type": "integer",
            "null_percentage": 0,
            "distinct_percentage": 100,
            "min_value": 1,
            "max_value": 1000
        }
    ]
}
```

---

## Data Quality

### 3. List DQ Rules
**Endpoint:** `GET /data-quality/rules`
**Description:** Retrieve a list of all Data Quality rules.

**Example Request:**
```bash
curl -X GET "http://localhost:8001/data-quality/rules"
```

**Example Response:**
```json
{
    "rules": [
        {
            "id": 1,
            "rule_name": "Check for Null Values",
            "rule_type": "not_null",
            "table_name": "customers",
            "column_name": "email",
            "is_active": true
        }
    ]
}
```

### 4. Create Custom Rule
**Endpoint:** `POST /data-quality/rules/custom`
**Description:** Create a new custom Data Quality rule.

**Request Body:**
```json
{
    "rule_name": "Check for Negative Prices",
    "rule_type": "custom",
    "table_name": "products",
    "column_name": "price",
    "sql_expression": "SELECT * FROM products WHERE price < 0"
}
```

**Example Request:**
```bash
curl -X POST "http://localhost:8001/data-quality/rules/custom" \
-H "Content-Type: application/json" \
-d '{"rule_name": "Check for Negative Prices", "rule_type": "custom", "table_name": "products", "column_name": "price", "sql_expression": "SELECT * FROM products WHERE price < 0"}'
```

### 5. Update Rule
**Endpoint:** `PUT /data-quality/rules/{id}`
**Description:** Update an existing Data Quality rule.

**Example Request:**
```bash
curl -X PUT "http://localhost:8001/data-quality/rules/1" \
-H "Content-Type: application/json" \
-d '{"rule_name": "Updated Rule Name"}'
```

### 6. Delete Rule
**Endpoint:** `DELETE /data-quality/rules/{id}`
**Description:** Delete a Data Quality rule.

**Example Request:**
```bash
curl -X DELETE "http://localhost:8001/data-quality/rules/1"
```

### 7. Toggle Rule Active Status
**Endpoint:** `PATCH /data-quality/rules/{id}/toggle`
**Description:** Toggle the active status of a Data Quality rule.

**Example Request:**
```bash
curl -X PATCH "http://localhost:8001/data-quality/rules/1/toggle"
```

---

## AI Analysis

### 8. Analyze Profiling Data
**Endpoint:** `POST /ai-analysis/analyze`
**Description:** Perform AI-based analysis on profiling data.

**Request Body:**
```json
{
    "profile_data": {
        "table_name": "sales",
        "columns": [...]
    }
}
```

### 9. Detect Anomalies
**Endpoint:** `POST /ai-analysis/anomalies/detect`
**Description:** Detect anomalies in the data.

**Request Body:**
```json
{
    "table_stats": {
        "sales": {"row_count": 15000000, "total_columns": 10}
    }
}
```

---

## Lineage

### 10. Get Table Lineage
**Endpoint:** `GET /lineage/table/{table}`
**Description:** Retrieve the lineage of a specific table.

**Example Request:**
```bash
curl -X GET "http://localhost:8001/lineage/table/sales"
```

### 11. Get Upstream Tables
**Endpoint:** `GET /lineage/upstream/{table}`
**Description:** Retrieve the upstream tables of a specific table.

### 12. Get Downstream Tables
**Endpoint:** `GET /lineage/downstream/{table}`
**Description:** Retrieve the downstream tables of a specific table.

### 13. Impact Analysis
**Endpoint:** `GET /lineage/impact/{table}`
**Description:** Perform impact analysis on a specific table.

---

## Reports

### 14. List Report Templates
**Endpoint:** `GET /reports/templates`
**Description:** Retrieve a list of all available report templates.

**Example Response:**
```json
{
    "templates": [
        {
            "template_id": "dq_summary",
            "name": "Data Quality Summary",
            "description": "Summary of DQ rule results"
        }
    ]
}
```

### 15. Generate Report
**Endpoint:** `POST /reports/generate`
**Description:** Generate a report based on a template.

**Request Body:**
```json
{
    "report_type": "dq_summary",
    "output_format": "json",
    "table_name": "sales"
}
```

### 16. Get DQ Summary
**Endpoint:** `GET /reports/summary`
**Description:** Retrieve a summary of Data Quality checks.

**Query Parameters:**
- `table_name` (optional): Filter by table name

---

## Audit Logging

### 17. Get Audit Logs
**Endpoint:** `GET /audit/logs`
**Description:** Retrieve audit logs with optional filtering.

**Query Parameters:**
- `table_name`: Filter by table
- `action`: Filter by action type
- `start_date`: Filter from date
- `end_date`: Filter to date

---

## Database Connections

### 18. List Connections
**Endpoint:** `GET /connections`
**Description:** List all configured database connections.

### 19. Switch Connection
**Endpoint:** `POST /connections/switch`
**Description:** Switch to a different database connection.

### 20. Test Connection
**Endpoint:** `POST /connections/{name}/test`
**Description:** Test a specific database connection.

---

This documentation was generated by the Local AI Swarm (RTX 5090 + RTX 3050).
